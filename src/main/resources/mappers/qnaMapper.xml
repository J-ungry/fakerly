<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.joongbu.fakerly.mapper.QnaMapper">
	<resultMap type="QnaDto" id="QnaMap">
		<id column="qa_no" property="qaNo"/>
		<result column="title" property="title"/>	
		<result column="contents" property="contents"/>	
		<result column="code" property="code"/>	
		<result column="q_datetime" property="qaTime"/>		
		<result column="views" property="views"/>
		<result column="qa_resolve" property="qa_resolve"/>	
		<result column="user_no" property="user_no"/>	
		<result column="nickname" property="nickname"/>

	</resultMap>
	<select id="qalist" resultMap="QnaMap">
		select * from qna left join user on qna.user_no=user.user_no 
		</select>
	<select id ="qalistCount" resultType="int">
		SELECT COUNT(*) FROM QNA
	</select>
	
	<select id="qadetail" resultMap="QnaMap">
		select * from qna order by qa_no desc
	</select>
	<select id="detailReplyPaging" resultMap="QnaMap">
	
	
	
	</select>
	
	
	
	<insert id="insert" parameterType="QnaDto"
	useGeneratedKeys="true" keyProperty="qaNo">
		INSERT INTO QNA
			(title, contents, code, qa_resolve, user_no)
			VALUES
			(#{title},#{contents},#{code},#{qa_resolve},#{user_no})	
	</insert>  
	<update id="update" parameterType="QnaDto">
		UPDATE QNA SET
			title=#{title},
			contents=#{contents},
			code=#{code},
			qa_resolve=#{qa_resolve}
			WHERE qa_no=#{qaNo}
	</update>
	<delete id="delete">
		DELETE FROM QNA
			WHERE qa_no=#{qaNo}
	</delete>
  </mapper>